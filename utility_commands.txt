// --- WEATHER ---
if (command === 'weather' || command === 'Ø·Ù‚Ø³' || command === 'meteo') {
    const city = args.join(' ') || 'Casablanca';
    try {
        const { data } = await axios.get(`https://wttr.in/${encodeURIComponent(city)}?format=j1`);
        const current = data.current_condition[0];
        const weather = `ğŸŒ¤ï¸ *Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ ${city}*\n\n` +
            `ğŸŒ¡ï¸ Ø§Ù„Ø­Ø±Ø§Ø±Ø©: ${current.temp_C}Â°C (${current.temp_F}Â°F)\n` +
            `ğŸ’¨ Ø§Ù„Ø±ÙŠØ§Ø­: ${current.windspeedKmph} km/h\n` +
            `ğŸ’§ Ø§Ù„Ø±Ø·ÙˆØ¨Ø©: ${current.humidity}%\n` +
            `â˜ï¸ Ø§Ù„ÙˆØµÙ: ${current.weatherDesc[0].value}\n` +
            `ğŸ‘ï¸ Ø§Ù„Ø±Ø¤ÙŠØ©: ${current.visibility} km`;
        return callSendAPI(sender_psid, { text: weather });
    } catch (e) {
        return callSendAPI(sender_psid, { text: "âŒ ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù‚Ø³. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©." });
    }
}

// --- PRAYER TIMES ---
if (command === 'salat' || command === 'ØµÙ„Ø§Ø©' || command === 'prayer') {
    const city = args.join(' ') || 'Casablanca';
    try {
        const { data } = await axios.get(`https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(city)}&country=Morocco&method=3`);
        const timings = data.data.timings;
        const date = data.data.date.readable;
        const prayerTimes = `ğŸ•Œ *Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© - ${city}*\nğŸ“… ${date}\n\n` +
            `ğŸŒ… Ø§Ù„ÙØ¬Ø±: ${timings.Fajr}\n` +
            `ğŸŒ„ Ø§Ù„Ø´Ø±ÙˆÙ‚: ${timings.Sunrise}\n` +
            `â˜€ï¸ Ø§Ù„Ø¸Ù‡Ø±: ${timings.Dhuhr}\n` +
            `ğŸŒ¤ï¸ Ø§Ù„Ø¹ØµØ±: ${timings.Asr}\n` +
            `ğŸŒ† Ø§Ù„Ù…ØºØ±Ø¨: ${timings.Maghrib}\n` +
            `ğŸŒ™ Ø§Ù„Ø¹Ø´Ø§Ø¡: ${timings.Isha}`;
        return callSendAPI(sender_psid, { text: prayerTimes });
    } catch (e) {
        return callSendAPI(sender_psid, { text: "âŒ ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©. Ø¬Ø±Ø¨: .salat Rabat" });
    }
}
